{"ast":null,"code":"import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import{Card,Button}from'react-native-paper';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const InsightsScreen=({navigation})=>{const[aiInsights,setAiInsights]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchInsights=async()=>{try{const response=await axios.get(\"http://localhost:8000/ai/insights\");setAiInsights(response.data);}catch(err){setError('Failed to load insights. Please try again.');console.error(\"Error fetching insights:\",err);}finally{setLoading(false);}};fetchInsights();},[]);const formatDateRange=range=>{const[start,end]=range.split(\" to \");const format=d=>new Date(d).toLocaleDateString('en-GB',{day:'numeric',month:'short'});return`${format(start)} - ${format(end)}`;};return _jsxs(ScrollView,{style:styles.container,children:[_jsx(Text,{style:styles.header,children:\"\\uD83D\\uDCC8 AI-Powered Financial Insights\"}),loading?_jsx(ActivityIndicator,{size:\"large\",color:\"white\"}):error?_jsx(Text,{style:styles.errorText,children:error}):aiInsights?_jsxs(_Fragment,{children:[_jsx(Card,{style:styles.card,children:_jsx(Card.Content,{children:_jsxs(Text,{style:styles.message,children:[\"\\uD83C\\uDFC6 \",_jsx(Text,{style:{fontWeight:\"bold\"},children:\"Top Spending Category:\"}),\" \",aiInsights.highest_spending_category]})})}),_jsx(Card,{style:styles.card,children:_jsx(Card.Content,{children:_jsxs(Text,{style:styles.message,children:[\"\\uD83D\\uDCA1 \",_jsx(Text,{style:{fontWeight:\"bold\"},children:\"Advice:\"}),\" \",aiInsights.advice]})})}),_jsx(Card,{style:styles.card,children:_jsxs(Card.Content,{children:[_jsxs(Text,{style:styles.message,children:[\"\\uD83D\\uDCCA \",_jsx(Text,{style:{fontWeight:\"bold\"},children:\"Next 4 Weeks Prediction:\"})]}),_jsxs(Text,{style:styles.message,children:[\"\\uD83D\\uDCB0 Total: \\xA3\",Object.values(aiInsights.predicted_total_spending).reduce((acc,val)=>acc+val,0).toFixed(2)]}),Object.entries(aiInsights.predicted_total_spending).map(([range,amount],idx)=>_jsxs(Text,{style:styles.message,children:[\"\\u2022 \",formatDateRange(range),\": \\xA3\",amount.toFixed(2)]},idx))]})})]}):_jsx(Text,{style:styles.message,children:\"No insights available.\"}),_jsx(Button,{mode:\"contained\",onPress:()=>navigation.navigate('Dashboard'),style:styles.button,children:\"Go to Dashboard\"}),_jsx(Button,{mode:\"contained\",onPress:()=>navigation.navigate('Transactions'),style:styles.button,children:\"View Transactions\"})]});};const styles=StyleSheet.create({container:{flex:1,padding:16,backgroundColor:'#8E241F'},header:{fontSize:22,fontWeight:'bold',marginBottom:15,textAlign:'center',color:'white'},card:{marginBottom:15,padding:10,backgroundColor:'white'},message:{fontSize:16,color:'#333'},button:{marginTop:10},errorText:{color:'red',textAlign:'center',fontSize:16,marginBottom:10}});export default InsightsScreen;","map":{"version":3,"names":["React","useState","useEffect","View","ScrollView","Text","StyleSheet","ActivityIndicator","Card","Button","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InsightsScreen","navigation","aiInsights","setAiInsights","loading","setLoading","error","setError","fetchInsights","response","get","data","err","console","formatDateRange","range","start","end","split","format","d","Date","toLocaleDateString","day","month","style","styles","container","children","header","size","color","errorText","card","Content","message","fontWeight","highest_spending_category","advice","Object","values","predicted_total_spending","reduce","acc","val","toFixed","entries","map","amount","idx","mode","onPress","navigate","button","create","flex","padding","backgroundColor","fontSize","marginBottom","textAlign","marginTop"],"sources":["/Users/adhithyasobhanan/MY FINIX-APP/FRONTEND/screens/InsightsScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, ScrollView, Text, StyleSheet, ActivityIndicator } from 'react-native';\nimport { Card, Button } from 'react-native-paper';\nimport axios from 'axios';\n\nconst InsightsScreen = ({ navigation }) => {\n    const [aiInsights, setAiInsights] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchInsights = async () => {\n            try {\n                const response = await axios.get(\"http://localhost:8000/ai/insights\");\n                setAiInsights(response.data);\n            } catch (err) {\n                setError('Failed to load insights. Please try again.');\n                console.error(\"Error fetching insights:\", err);\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchInsights();\n    }, []);\n\n    const formatDateRange = (range) => {\n        const [start, end] = range.split(\" to \");\n        const format = (d) => new Date(d).toLocaleDateString('en-GB', { day: 'numeric', month: 'short' });\n        return `${format(start)} - ${format(end)}`;\n    };\n\n    return (\n        <ScrollView style={styles.container}>\n            <Text style={styles.header}>üìà AI-Powered Financial Insights</Text>\n\n            {loading ? (\n                <ActivityIndicator size=\"large\" color=\"white\" />\n            ) : error ? (\n                <Text style={styles.errorText}>{error}</Text>\n            ) : aiInsights ? (\n                <>\n                    \n                       \n\n                    <Card style={styles.card}>\n                        <Card.Content>\n                            <Text style={styles.message}>üèÜ <Text style={{ fontWeight: \"bold\" }}>Top Spending Category:</Text> {aiInsights.highest_spending_category}</Text>\n                        </Card.Content>\n                    </Card>\n\n                    <Card style={styles.card}>\n                        <Card.Content>\n                            <Text style={styles.message}>üí° <Text style={{ fontWeight: \"bold\" }}>Advice:</Text> {aiInsights.advice}</Text>\n                        </Card.Content>\n                    </Card>\n\n                    <Card style={styles.card}>\n                        <Card.Content>\n                            <Text style={styles.message}>üìä <Text style={{ fontWeight: \"bold\" }}>Next 4 Weeks Prediction:</Text></Text>\n                            <Text style={styles.message}>\n                                üí∞ Total: ¬£{Object.values(aiInsights.predicted_total_spending).reduce((acc, val) => acc + val, 0).toFixed(2)}\n                            </Text>\n                            {Object.entries(aiInsights.predicted_total_spending).map(([range, amount], idx) => (\n                                <Text key={idx} style={styles.message}>\n                                    ‚Ä¢ {formatDateRange(range)}: ¬£{amount.toFixed(2)}\n                                </Text>\n                            ))}\n                        </Card.Content>\n                    </Card>\n                </>\n            ) : (\n                <Text style={styles.message}>No insights available.</Text>\n            )}\n\n            <Button mode=\"contained\" onPress={() => navigation.navigate('Dashboard')} style={styles.button}>\n                Go to Dashboard\n            </Button>\n            <Button mode=\"contained\" onPress={() => navigation.navigate('Transactions')} style={styles.button}>\n                View Transactions\n            </Button>\n        </ScrollView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: { flex: 1, padding: 16, backgroundColor: '#8E241F' },\n    header: {\n        fontSize: 22,\n        fontWeight: 'bold',\n        marginBottom: 15,\n        textAlign: 'center',\n        color: 'white'\n    },\n    card: { marginBottom: 15, padding: 10, backgroundColor: 'white' },\n    message: { fontSize: 16, color: '#333' },\n    button: { marginTop: 10 },\n    errorText: { color: 'red', textAlign: 'center', fontSize: 16, marginBottom: 10 },\n});\n\nexport default InsightsScreen;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}